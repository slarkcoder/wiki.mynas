# 反向代理工具 - Lucky

如果你有公网 IP（v4/v6），那么速度最快的远程访问方案肯定就是使用域名 + DDNS 直接连接了，其中涉及到 DDNS 域名绑定，端口转发，HTTPS 证书等等环节。在 Lucky 出现之前，你可能需要用到几个不同的工具互相配合，才能实现所有环节的功能。而有了 Lucky，你就可以把所有的功能都放到一个软件里面，降低了维护成本。其次，Lucky 可以利用域名反代功能，来隐藏你内网中的服务，避免暴露过多的端口，来降低安全风险。本篇教程就来介绍如何使用 Lucky。

## 准备工作

- 确认你的拨号设备以及 Lucky 所在的设备能获取到公网 IP
- 注册购买域名（如果是国内平台注册域名，还需要通过实名认证）
- 在域名管理后台创建 `API Key / Token`

## 设置域名 DDNS

在 Lucky 的动态域名中，添加 DDNS 任务，选择你的域名托管服务商，填入 `API Key / Token`，IP 类型按你的实际情况选择，最后填写你的域名。

![](https://img.slarker.me/wiki/20250208110402737.webp)

添加成功后，你就可以看到你的公网 IP 通过 DDNS 绑定到域名上了。

![](https://img.slarker.me/wiki/20250208110513247.webp)

你可以通过 [itdog](https://www.itdog.cn/ping_ipv6/) 测试你的域名在全国范围内的解析情况。

![](https://img.slarker.me/wiki/20250208113610650.webp)

### 光猫防火墙问题

有时候，通过 [itdog](https://www.itdog.cn/ping_ipv6/) 测试 DNS 解析正常，但是 `域名:端口` 却无法访问，很可能是由于光猫的防火墙设置拦截了 ipv6 的访问请求。比如移动光猫中就有下面的设置：

![](https://img.slarker.me/wiki/Snipaste_2025-02-08_21-50-39.webp)

**需要确保防火墙中的 `IPV6Spi` 选项没有勾选。**

:::info 提示
光猫的后台账号一般有两个，普通用户和管理员。光猫背面贴的标签上的账号为普通用户账号，登录进去后只能查看一些基本的信息。如果要修改设置（比如上面提到的防火墙设置），只能使用管理员账号，管理员账号密码可以通过搜索或者咨询宽带安装师傅获得。如果上述办法都不可行，网上也有一些特定型号光猫的管理员密码获取教程，可以搜索试试。
:::

## 申请证书

使用 Lucky 的好处就是可以方便的为服务添加 HTTPS 证书，来保证传输过程是安全的。有些服务，比如自建的 bitwarden 就要求必须使用 HTTPS 才能访问。

在 `SSL/TLS 证书` 中 `添加证书`，添加方式选择 `ACME`，证书颁发机构 `Let's Encrypt / ZeroSSL` 都可以，和之前设置 DDNS 一样，选择域名服务商，填入你的域名和 `API Key / Token`。邮箱和算法使用默认的就行，不需要修改。最后在 `更多设置` 里，确认你需要使用哪个网络（IPv4/IPv6）来申请证书。

![](https://img.slarker.me/wiki/20250208115310780.webp)

证书申请成功后，会自动下载到 Lucky 里。

![](https://img.slarker.me/wiki/20250208114840892.webp)

## 设置端口转发