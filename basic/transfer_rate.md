# 排查文件传输速度问题

如果你的电脑和 NAS 之间的文件传输速度没有达到预期，可以按照本文所述的步骤来排查。除了下面提到的几点之外，传输的文件大小（机械盘读写小文件会慢很多）也会影响传输速度，所以在测试的时候，尽量使用大体积的视频文件来测试。

## 排查步骤

整体排查步骤主要包括以下几点，最慢的一点将会成为传输速度的瓶颈。

- 网络测速
- 源位置读取测试
- 目标位置写入测试

## 网络测速

### 换算关系

这里首先要明白一个概念，网速的单位是 `Mbps`，文件的大小的 `MB`，两者的换算关系（8 倍）如下：

- 1Mbps = 125KB/s = 0.125MB/s
- 1Gbps = 125MB/s
- 2.5Gbps = 312.5MB/s
- 10Gbps = 1250MB/s

上面的这些只是理论上的传输速度，实际只要达到 90% 左右就可以算正常。

### 硬件条件

首先要确保你的电脑和 NAS 之间满足预期传输速度的条件。比如你想要达到跑满 2.5Gbps，你的电脑网卡，NAS 网卡，以及中间涉及到的交换机、路由器等网络设备都要使用 2.5G 网卡，包括所用到的网线（超五类，六类都可以）也要满足 2.5G 传输速度。

如果你确认你的网卡没问题，都有 2.5G 网卡，而文件传输速度卡在 10MB/s 左右，那大概率是某根网线有问题，找出来这根网线更换就可以解决。

### 测速方法

网络测速，如果是 2.5G 网络，可以在 NAS 上安装 homebox，librespeed，openspeedtest 等工具。如果是万兆网络，可以使用 iperf3 来测试。
