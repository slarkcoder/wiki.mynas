import{_ as a,c as t,a2 as i,o as s}from"./chunks/framework.eme8ZeBJ.js";const k=JSON.parse('{"title":"虚拟 iStoreOS 旁路由","description":"","frontmatter":{},"headers":[],"relativePath":"pve/istoreos.md","filePath":"pve/istoreos.md","lastUpdated":1737623445000}'),o={name:"pve/istoreos.md"};function c(d,e,p,r,l,m){return s(),t("div",null,e[0]||(e[0]=[i('<h1 id="虚拟-istoreos-旁路由" tabindex="-1">虚拟 iStoreOS 旁路由 <a class="header-anchor" href="#虚拟-istoreos-旁路由" aria-label="Permalink to &quot;虚拟 iStoreOS 旁路由&quot;">​</a></h1><p>旁路由在逻辑上和你网络中的 PC，手机没有区别，都是网络中的一个普通设备，仅仅是多了一个流量转发的功能。网络中的其他设备如果需要使用，只需要将设备 IP 设置为静态，把 <code>网关</code> 和 <code>DNS</code> 指向旁路由的 IP 即可。</p><p>旁路由对网口数量没有要求，只需要设备有一个网口就可以。下面就介绍如何在 PVE 中虚拟 iStoreOS 作为旁路由。</p><h2 id="istoreos-镜像" tabindex="-1">iStoreOS 镜像 <a class="header-anchor" href="#istoreos-镜像" aria-label="Permalink to &quot;iStoreOS 镜像&quot;">​</a></h2><p>iStoreOS 镜像你可以在 <a href="https://fw.koolcenter.com/iStoreOS/x86_64/" target="_blank" rel="noreferrer">官网下载</a> 并解压得到 <code>img</code> 文件。为了减少出错，解压后可以重命名为 <code>istoreos.img</code>。</p><p>在 PVE 的 <code>ISO 镜像</code> 中上传 iStoreOS 的镜像 <code>istoreos.img</code>。</p><p><img src="https://img.slarker.me/wiki/8cfae25a132a4fc5833f63cecd2fc08b.webp" alt=""></p><h2 id="建立虚拟机" tabindex="-1">建立虚拟机 <a class="header-anchor" href="#建立虚拟机" aria-label="Permalink to &quot;建立虚拟机&quot;">​</a></h2><p>在 PVE 中创建虚拟机，名称自己填写，注意这里有个 <code>VM ID</code>，是该虚拟机的唯一 <code>ID</code> 标识（默认 PVE 会自动分配，不需要修改），后续在 PVE 的 <code>shell</code> 终端中可以使用命令通过该 <code>ID</code> 操作虚拟机。</p><p><img src="https://img.slarker.me/wiki/61df2727689e4b97827cf2c0704e78d5.webp" alt=""></p><p>选择 <code>不使用任何介质</code>。</p><p><img src="https://img.slarker.me/wiki/8722403cbba247e594c78c7a8eed83ac.webp" alt=""></p><p>系统 BIOS 选择 <code>q35</code>。</p><p><img src="https://img.slarker.me/wiki/2d3e73f99daf4a08b8b32d90e33cd45b.webp" alt=""></p><p>删除默认的磁盘。</p><p><img src="https://img.slarker.me/wiki/fe7d94948c4548ea9c24addcadddde85.webp" alt=""></p><p>CPU 核心可以设置为 <code>2</code>，类别一般选择 <code>host</code>。</p><p><img src="https://img.slarker.me/wiki/71cf2d75610245b5a1cb3f9ff07821c0.webp" alt=""></p><p>内存选择 <code>1024</code>，也就是 <code>1GB</code>。</p><p><img src="https://img.slarker.me/wiki/4c022e741f3f49af8d30994fd8df51a8.webp" alt=""></p><p>网络保持默认。</p><p><img src="https://img.slarker.me/wiki/a5d129dfad3a4140b028838c1d207478.webp" alt=""></p><p>确认没问题，点击完成。</p><p><img src="https://img.slarker.me/wiki/573e913a30d0441ab91be4c96d003be0.webp" alt=""></p><p>在 PVE 的 <code>shell</code> 终端中使用命令导入 iStoreOS 镜像：</p><div class="info custom-block"><p class="custom-block-title">提示</p><p>下面命令中的 104 为 iStoreOSTest 虚拟机的 ID。末尾的 local 为虚拟机的存储空间，如果你的 PVE 没有将 local-lvm 合并到 local，那么末尾应该为 local-lvm。</p></div><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> importdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 104</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/vz/template/iso/istoreos.img</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span></span></code></pre></div><p><img src="https://img.slarker.me/wiki/f3da02dfcfc94b3daa853c29f623600d.webp" alt=""></p><p>在 iStoreOSTest 虚拟机的 <code>硬件</code> 中双击 <code>未使用的磁盘 0</code>，将总线设备修改为 <code>SATA</code>，点击 <code>添加</code>。</p><p><img src="https://img.slarker.me/wiki/1c9dadf2d8d44008af3b74ce64edeb5e.webp" alt=""></p><p>在 iStoreOSTest 虚拟机的 <code>选项</code> 中双击 <code>引导顺序</code>，仅将 <code>sata0</code> 保持勾选，并移动到第一个引导顺序，点击 <code>OK</code>。</p><p><img src="https://img.slarker.me/wiki/8571128ecf3e46ca8ed9252d424d1e2d.webp" alt=""></p><p>之后启动 iStoreOSTest 虚拟机，后续设置过程请参考：<a href="/istoreos/route_setting.html">iStoreOS 路由模式设置</a>。</p>',33)]))}const n=a(o,[["render",c]]);export{k as __pageData,n as default};
